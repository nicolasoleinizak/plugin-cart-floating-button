<?php
/*
 * Plugin Name: Cart floating button
 * Author: Nicolas Oleinizak
 * Description: En sitios que implementan WooCommerce, un botÃ³n al carrito aparecerÃ¡ flotando siempre que haya productos agregados
 */

function mostrar_boton_carrito() {
  if (class_exists('WooCommerce')) {
    $num_productos = WC()->cart->get_cart_contents_count();

    if ($num_productos > 0) {
      $link = wc_get_cart_url();
      $html = <<<HTML
        <a href="{$link}" class="cart-button">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100%" viewBox="0 0 256 240" enable-background="new 0 0 256 240" xml:space="preserve">
            <path fill="#ffffff" opacity="1.000000" stroke="none" d=" M147.000000,178.963913   C127.676651,178.959076 108.853264,178.972778 90.029922,178.949387   C81.879242,178.939255 80.573456,177.992874 78.599525,170.160904   C67.630508,126.639313 56.639793,83.122849 45.869846,39.551899   C44.705597,34.841801 42.879181,32.903187 37.840340,33.243889   C31.209927,33.692211 24.519876,33.406754 17.860758,33.233498   C12.898944,33.104397 9.787633,30.209173 9.841007,26.185610   C9.896014,22.038849 12.949288,18.857817 17.666788,18.784586   C28.324379,18.619141 38.986534,18.730629 49.646748,18.760374   C53.685566,18.771643 56.209549,20.844261 57.239342,24.700312   C58.653599,29.996008 60.273842,35.257729 61.293911,40.631180   C62.151138,45.146816 64.032547,46.797199 68.921524,46.773499   C113.063843,46.559483 157.207642,46.645847 201.351013,46.652447   C208.513779,46.653519 215.679382,46.577248 222.838516,46.750355   C230.622467,46.938568 233.012878,49.532978 231.228577,57.034695   C224.844238,83.876389 218.728806,110.787132 211.345428,137.385239   C209.870605,142.698196 206.567352,144.316040 201.396149,144.304382   C165.748718,144.223907 130.100937,144.282806 94.453339,144.343246   C92.361946,144.346786 90.126366,143.744217 87.973083,145.306732   C88.199432,150.757019 90.255730,155.885605 91.489128,161.174179   C92.219460,164.305710 94.969894,163.769089 97.233070,163.773239   C115.723236,163.807037 134.213486,163.799713 152.703705,163.804352   C166.529724,163.807816 180.355728,163.809158 194.181747,163.815613   C195.514130,163.816238 196.853439,163.764755 198.177612,163.877487   C202.606003,164.254532 206.150558,167.582611 206.201752,171.336014   C206.254837,175.226074 202.477066,179.046738 197.971588,179.103119   C188.145554,179.226105 178.316269,179.093674 168.488327,179.058853   C161.492203,179.034073 154.496109,178.998276 147.000000,178.963913  M70.477890,77.137352   C70.841026,78.584198 71.326035,80.012886 71.544792,81.481239   C72.244133,86.175392 74.551743,88.443077 79.616112,87.881592   C83.395233,87.462601 87.260269,87.611801 91.074905,87.781334   C94.505829,87.933815 96.067451,86.672745 95.624039,83.150475   C94.878319,77.226669 94.227066,71.290878 93.466431,65.369072   C93.131035,62.757874 91.903160,61.210258 88.889008,61.286728   C82.908760,61.438446 76.920631,61.402088 70.938232,61.299191   C67.598793,61.241756 66.895340,62.919151 67.601440,65.733444   C68.489258,69.272057 69.429482,72.797516 70.477890,77.137352  M213.678055,68.351555   C215.398071,61.468254 215.305664,61.340691 208.240097,61.314781   C203.575928,61.297680 198.896988,61.533524 194.252167,61.232059   C190.653336,60.998486 189.034546,62.427517 188.621185,65.837067   C187.921585,71.607750 187.161957,77.371880 186.353043,83.128296   C185.863800,86.609741 187.256241,87.995964 190.767853,87.854614   C195.425171,87.667137 200.097061,87.675179 204.757629,87.795441   C207.783646,87.873528 209.238388,86.692535 209.861511,83.658058   C210.863068,78.780663 212.302139,73.993111 213.678055,68.351555  M133.652237,82.239380   C133.651443,76.744865 133.532074,71.246826 133.695465,65.757202   C133.789413,62.600658 132.757431,61.189388 129.424774,61.287628   C123.768883,61.454361 118.100380,61.447113 112.444679,61.271320   C109.031113,61.165215 107.979485,62.716537 108.352211,65.816101   C109.065735,71.749603 109.719536,77.690536 110.471161,83.619118   C110.807137,86.269211 112.204552,87.805412 115.109993,87.761810   C119.770706,87.691849 124.440247,87.602745 129.093048,87.811569   C132.585129,87.968307 134.067032,86.610413 133.652237,82.239380  M151.965683,61.341499   C149.065506,61.176178 148.287125,62.789383 148.321365,65.389259   C148.402313,71.537636 148.445175,77.690033 148.305893,83.836327   C148.234222,86.999245 149.772644,87.865433 152.584244,87.807022   C157.069824,87.713837 161.565979,87.611687 166.043518,87.818840   C169.443466,87.976143 170.908722,86.346619 171.315933,83.280594   C172.101501,77.365852 172.872864,71.449226 173.645813,65.532814   C174.024979,62.630424 172.965683,61.213810 169.818634,61.291336   C164.171265,61.430454 158.517929,61.327408 151.965683,61.341499  M82.749634,125.854431   C83.248222,128.477493 84.530067,129.919266 87.503632,129.687759   C90.478668,129.456161 93.493927,129.495865 96.476463,129.672043   C99.729652,129.864227 101.096237,128.621124 100.692368,125.320091   C99.927094,119.065094 99.283493,112.795303 98.550636,106.536179   C98.365387,104.954041 97.679794,103.418037 95.956604,103.298355   C89.928764,102.879715 83.881821,102.570763 77.295883,103.605446   C79.151199,111.289345 80.817055,118.188568 82.749634,125.854431  M182.380539,114.797783   C182.107956,116.935272 181.876038,119.078873 181.555573,121.209160   C180.342484,129.272705 180.646591,129.639023 188.827255,129.646439   C190.987473,129.648392 193.147705,129.627319 195.307938,129.625458   C196.936386,129.624069 198.250610,129.174332 198.736389,127.397903   C200.858566,119.637314 203.146301,111.912674 204.337845,104.046921   C201.281952,102.482536 198.580429,102.963890 195.965652,102.960922   C184.694702,102.948112 184.694672,102.977638 182.380539,114.797783  M133.661179,115.504799   C133.643295,102.981880 133.643295,102.977142 120.966309,102.989876   C119.306465,102.991547 117.643860,103.025124 115.987663,103.127129   C114.167046,103.239258 113.218307,104.316803 113.436798,106.094688   C114.264603,112.830536 115.189774,119.554352 116.057541,126.285378   C116.368874,128.700348 117.726433,129.667618 120.122643,129.640274   C136.586288,129.452454 133.294098,131.715363 133.660370,117.488098   C133.668915,117.156036 133.661530,116.823555 133.661179,115.504799  M166.775223,118.558563   C167.342514,114.791130 167.853897,111.014145 168.494629,107.259247   C169.016434,104.201454 167.755341,102.924225 164.743332,102.971214   C160.754974,103.033432 156.762314,103.083069 152.776474,102.967163   C149.247559,102.864540 148.165726,104.571777 148.285309,107.878189   C148.459442,112.692444 148.327240,117.517685 148.330719,122.338242   C148.335983,129.633240 148.337830,129.633240 155.765152,129.643433   C165.872238,129.657303 165.872238,129.657303 166.775223,118.558563  z"/>
            <path fill="#ffffff" opacity="1.000000" stroke="none" d=" M197.159149,202.440552   C194.011093,210.517014 190.146423,213.412994 183.118195,213.322540   C177.262085,213.247162 171.984787,209.589737 170.044617,204.261871   C168.202698,199.203903 169.595444,192.556091 173.634369,189.129700   C178.045685,185.387405 183.066162,183.334518 188.818695,186.033539   C194.262573,188.587784 197.130051,192.981461 197.328247,199.034058   C197.360840,200.029190 197.267029,201.028473 197.159149,202.440552  z"/>
            <path fill="#ffffff" opacity="1.000000" stroke="none" d=" M101.976402,185.673416   C111.509216,189.380051 115.190521,197.627579 111.260498,205.650742   C107.572945,213.178894 98.185143,215.688614 90.804909,211.119278   C85.070320,207.568848 82.834724,200.516769 85.401459,194.074463   C87.926926,187.735733 94.317810,184.395355 101.976402,185.673416  z"/>
          </svg>
        </a>
      HTML;
      echo $html;
    }
  }
}

add_action('wp_footer', 'mostrar_boton_carrito');

function enqueue_custom_styles() {
  $plugin_url = plugin_dir_url(__FILE__);

  wp_enqueue_style('custom-styles', $plugin_url . 'css/styles.css');
}

add_action('wp_enqueue_scripts', 'enqueue_custom_styles');
?>